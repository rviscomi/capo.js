(()=>{function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}function t(e){return[`oklch(5% .1 ${e})`,`oklch(13% .2 ${e})`,`oklch(25% .2 ${e})`,`oklch(35% .25 ${e})`,`oklch(50% .27 ${e})`,`oklch(67% .31 ${e})`,`oklch(72% .25 ${e})`,`oklch(80% .2 ${e})`,`oklch(90% .1 ${e})`,`oklch(99% .05 ${e})`,"#ccc"]}let i=["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2","#cccccc"],n=t(320),r=t(200),s={DEFAULT:i,PINK:n,BLUE:r};var a={};e(a,"IO",()=>o);class o{constructor(e,t,i=window.console){this.document=e,this.options=t,this.console=i,this.isStaticHead=!1,this.head=null}async init(){if(!this.head){if(this.options.prefersDynamicAssessment()){this.head=this.document.querySelector("head");return}try{let e=await this.getStaticHTML();e=e.replace(/(\<\/?)(head)/gi,"$1static-head");let t=this.document.implementation.createHTMLDocument("New Document");t.documentElement.innerHTML=e,this.head=t.querySelector("static-head"),this.head?this.isStaticHead=!0:this.head=this.document.head}catch(e){this.console.error(`${this.options.loggingPrefix}An exception occurred while getting the static <head>:`,e),this.head=this.document.head}this.isStaticHead||this.console.warn(`${this.options.loggingPrefix}Unable to parse the static (server-rendered) <head>. Falling back to document.head`,this.head)}}async getStaticHTML(){let e=this.document.location.href,t=await fetch(e);return await t.text()}getHead(){return this.head}stringifyElement(e){return e.getAttributeNames().reduce((t,i)=>t+=`[${CSS.escape(i)}=${JSON.stringify(e.getAttribute(i))}]`,e.nodeName)}getLoggableElement(e){if(!this.isStaticHead)return e;let t=this.stringifyElement(e),i=Array.from(this.document.head.querySelectorAll(t));if(0==i.length)return e;if(1==i.length)return i[0];let n=this.document.createElement("div"),r=this.document.createElement("div");r.innerHTML=e.innerHTML;let s=i.find(e=>(n.innerHTML=e.innerHTML,n.innerHTML==r.innerHTML));return s||e}createElementFromSelector(e){let t=e.match(/^[A-Za-z]+/)[0];if(!t)return;let i=document.createElement(t),n=e.match(/\[([A-Za-z-]+)="([^"]+)"\]/g)||[];return n.forEach(e=>{e=e.slice(1,-1);let t=e.indexOf("="),n=e.slice(0,t),r=e.slice(t+1).slice(1,-1);i.setAttribute(n,r)}),i}logElementFromSelector({weight:e,selector:t,innerHTML:i,isValid:n,customValidations:r={}}){e=+e;let s=this.getElementVisualization(e),a=this.createElementFromSelector(t);a.innerHTML=i,a=this.getLoggableElement(a),this.logElement({viz:s,weight:e,element:a,isValid:n,customValidations:r})}logElement({viz:e,weight:t,element:i,isValid:n,customValidations:r,omitPrefix:s=!1}){s||(e.visual=`${this.options.loggingPrefix}${e.visual}`);let a="log",o=[e.visual,e.style,t+1,i];if(!this.options.isValidationEnabled()){this.console[a](...o);return}let{payload:l,warnings:c}=r;l&&("string"==typeof l.expiry&&(l.expiry=new Date(l.expiry)),o.push(l)),c?.length?(a="warn",o.push("\n"+c.map(e=>`  ❌ ${e}`).join("\n"))):!n&&(this.options.prefersDynamicAssessment()||this.isStaticHead)&&(a="warn",o.push(`
  ❌ invalid element (${i.tagName})`)),this.console[a](...o)}logValidationWarnings(e){this.options.isValidationEnabled()&&e.forEach(({warning:e,elements:t=[],element:i})=>{t=t.map(this.getLoggableElement.bind(this)),this.console.warn(`${this.options.loggingPrefix}${e}`,...t,i||"")})}getColor(e){return this.options.palette[10-e]}getHeadVisualization(e){let t="",i=[];return e.forEach(({weight:e,isValid:n})=>{t+="%c ";let r=this.getColor(e),s="padding: 5px; margin: 0 -1px; ";if(n)s+=`background-color: ${r};`;else{let e;s+=`background-image: ${r==(e="#cccccc")&&(e="red"),`repeating-linear-gradient(45deg, ${r}, ${r} 3px, ${e} 3px, ${e} 6px)`}`}i.push(s)}),{visual:t,styles:i}}getElementVisualization(e){let t=`%c${Array(e+1).fill("█").join("")}`,i=this.getColor(e),n=`color: ${i}`;return{visual:t,style:n}}visualizeHead(e,t,i){let n=this.getHeadVisualization(i);this.console.groupCollapsed(`${this.options.loggingPrefix}${e} %chead%c order
${n.visual}`,"font-family: monospace","font-family: inherit",...n.styles),i.forEach(({weight:e,element:t,isValid:i,customValidations:n})=>{let r=this.getElementVisualization(e);this.logElement({viz:r,weight:e,element:t,isValid:i,customValidations:n,omitPrefix:!0})}),this.console.log(`${e} %chead%c element`,"font-family: monospace","font-family: inherit",t),this.console.groupEnd()}}var l={};e(l,"Options",()=>c);class c{constructor({preferredAssessmentMode:e=c.AssessmentMode.STATIC,validation:t=!0,palette:n=i,loggingPrefix:r="Capo: "}={}){this.setPreferredAssessmentMode(e),this.setValidation(t),this.setPalette(n),this.setLoggingPrefix(r)}static get AssessmentMode(){return{STATIC:"static",DYNAMIC:"dynamic"}}static get Palettes(){return s}prefersStaticAssessment(){return this.preferredAssessmentMode===c.AssessmentMode.STATIC}prefersDynamicAssessment(){return this.preferredAssessmentMode===c.AssessmentMode.DYNAMIC}isValidationEnabled(){return this.validation}setPreferredAssessmentMode(e){if(!this.isValidAssessmentMode(e))throw Error(`Invalid option: preferred assessment mode, expected AssessmentMode.STATIC or AssessmentMode.DYNAMIC, got "${e}".`);this.preferredAssessmentMode=e}setPreferredAssessmentModeToStatic(e){let t=c.AssessmentMode.STATIC;e||(t=c.AssessmentMode.DYNAMIC),this.setPreferredAssessmentMode(t)}setValidation(e){if(!this.isValidValidation(e))throw Error(`Invalid option: validation, expected boolean, got "${e}".`);this.validation=e}setPalette(e){if(!this.isValidPalette(e))throw Error(`Invalid option: palette, expected [${Object.keys(s).join("|")}] or an array of colors, got "${e}".`);if("string"==typeof e){this.palette=s[e];return}this.palette=e}setLoggingPrefix(e){if(!this.isValidLoggingPrefix(e))throw Error(`Invalid option: logging prefix, expected string, got "${e}".`);this.loggingPrefix=e}isValidAssessmentMode(e){return Object.values(c.AssessmentMode).includes(e)}isValidValidation(e){return"boolean"==typeof e}isValidPalette(e){return"string"==typeof e?Object.keys(s).includes(e):!!Array.isArray(e)&&11===e.length&&e.every(e=>"string"==typeof e)}isValidLoggingPrefix(e){return"string"==typeof e}isPreferredPalette(e){return JSON.stringify(this.palette)==JSON.stringify(e)}valueOf(){return{preferredAssessmentMode:this.preferredAssessmentMode,validation:this.validation,palette:this.palette,loggingPrefix:this.loggingPrefix}}}var u={};e(u,"ElementWeights",()=>h),e(u,"ElementDetectors",()=>d),e(u,"isMeta",()=>p),e(u,"isTitle",()=>g),e(u,"isPreconnect",()=>f),e(u,"isAsyncScript",()=>y),e(u,"isImportStyles",()=>b),e(u,"isSyncScript",()=>w),e(u,"isSyncStyles",()=>v),e(u,"isPreload",()=>T),e(u,"isDeferScript",()=>E),e(u,"isPrefetchPrerender",()=>S),e(u,"META_HTTP_EQUIV_KEYWORDS",()=>m),e(u,"isOriginTrial",()=>A),e(u,"isMetaCSP",()=>$),e(u,"getWeight",()=>P),e(u,"getHeadWeights",()=>C);let h={META:10,TITLE:9,PRECONNECT:8,ASYNC_SCRIPT:7,IMPORT_STYLES:6,SYNC_SCRIPT:5,SYNC_STYLES:4,PRELOAD:3,DEFER_SCRIPT:2,PREFETCH_PRERENDER:1,OTHER:0},d={META:p,TITLE:g,PRECONNECT:f,ASYNC_SCRIPT:y,IMPORT_STYLES:b,SYNC_SCRIPT:w,SYNC_STYLES:v,PRELOAD:T,DEFER_SCRIPT:E,PREFETCH_PRERENDER:S},m=["accept-ch","content-security-policy","content-type","default-style","delegate-ch","origin-trial","x-dns-prefetch-control"];function p(e,t){let i=m.map(e=>`[http-equiv="${e}" i]`).join(", ");return t.matches(e,`meta:is([charset], ${i}, [name=viewport]), base`)}function g(e,t){return t.matches(e,"title")}function f(e,t){return t.matches(e,"link[rel=preconnect]")}function y(e,t){return t.matches(e,"script[src][async]")}function b(e,t){return!!t.matches(e,"style")&&/@import/.test(t.getTextContent(e))}function w(e,t){return t.matches(e,"script:not([src][defer],[src][type=module],[src][async],[type*=json])")}function v(e,t){return t.matches(e,"link[rel=stylesheet],style")}function T(e,t){return t.matches(e,"link:is([rel=preload], [rel=modulepreload])")}function E(e,t){return t.matches(e,"script[src][defer], script:not([src][async])[src][type=module]")}function S(e,t){return t.matches(e,"link:is([rel=prefetch], [rel=dns-prefetch], [rel=prerender])")}function A(e,t){return t.matches(e,'meta[http-equiv="origin-trial"i]')}function $(e,t){return t.matches(e,'meta[http-equiv="Content-Security-Policy" i], meta[http-equiv="Content-Security-Policy-Report-Only" i]')}function P(e,t){for(let[i,n]of Object.entries(d))if(n(e,t))return h[i];return h.OTHER}function C(e,t){let i=t.getChildren(e);return i.map(e=>({element:e,weight:P(e,t)}))}var x={};e(x,"VALID_HEAD_ELEMENTS",()=>N),e(x,"CONTENT_TYPE_SELECTOR",()=>V),e(x,"HTTP_EQUIV_SELECTOR",()=>L),e(x,"PRELOAD_SELECTOR",()=>M),e(x,"isValidElement",()=>k),e(x,"hasValidationWarning",()=>H),e(x,"getValidationWarnings",()=>I),e(x,"getCustomValidations",()=>O);let N=new Set(["base","link","meta","noscript","script","style","template","title"]),V='meta[http-equiv="content-type" i], meta[charset]',L="meta[http-equiv]",M='link:is([rel="preload" i], [rel="modulepreload" i])';function k(e,t){return N.has(t.getTagName(e).toLowerCase())}function H(e,t){return!!(!k(e,t)||t.matches(e,`:has(:not(${Array.from(N).join(", ")}))`)||t.matches(e,"title:is(:nth-of-type(n+2))")||t.matches(e,"base:has(~ base), base ~ base")||$(e,t)||function(e,t){if(!U(e,t))return!1;let{warnings:i}=J(e,t);return i.length>0}(e,t)||function(e,t){if(!z(e,t))return!1;let{warnings:i}=K(e,t);return i.length>0}(e,t)||function(e,t){if(!R(e,t))return!1;let{warnings:i}=Y(e,t);return i.length>0}(e,t)||function(e,t){if(!q(e,t))return!1;let{warnings:i}=W(e,t);return i.length>0}(e,t)||function(e,t){if(!A(e,t))return!1;let{warnings:i}=D(e,t);return i.length>0}(e,t)||_(e,t))}function I(e,t){let i=[],n=Array.from(e.querySelectorAll("title")),r=n.length;1!=r&&i.push({warning:`Expected exactly 1 <title> element, found ${r}`,elements:n});let s=e.querySelectorAll('meta[name="viewport" i]');1!=s.length&&i.push({warning:`Expected exactly 1 <meta name=viewport> element, found ${s.length}`});let a=Array.from(e.querySelectorAll("base")),o=a.length;o>1&&i.push({warning:`Expected at most 1 <base> element, found ${o}`,elements:a});let l=e.querySelector('meta[http-equiv="Content-Security-Policy" i]');l&&i.push({warning:"CSP meta tags disable the preload scanner due to a bug in Chrome. Use the CSP header instead. Learn more: https://crbug.com/1458493",element:l}),e.querySelectorAll("*").forEach(n=>{if(k(n,t))return;let r=n;for(;r.parentElement!=e;)r=r.parentElement;i.push({warning:`${n.tagName} elements are not allowed in the <head>`,element:r})});let c=Array.from(e.querySelectorAll('meta[http-equiv="Origin-Trial" i]'));return c.forEach(e=>{let n=D(e,t);0!=n.warnings.length&&i.push({warning:`Invalid origin trial token: ${n.warnings.join(", ")}`,elements:[e],element:n.payload})}),i}function O(e,t){return A(e,t)?D(e,t):$(e,t)?function(e,t){let i=[],n=null;if(t.matches(e,'meta[http-equiv="Content-Security-Policy-Report-Only" i]'))return i.push("CSP Report-Only is forbidden in meta tags"),i;t.matches(e,'meta[http-equiv="Content-Security-Policy" i]')&&i.push("meta CSP discouraged. See https://crbug.com/1458493.");let r=t.getAttribute(e,"content");if(!r)return i.push("Invalid CSP. The content attribute must be set."),{warnings:i,payload:n};let s=Object.fromEntries(r.split(/\s*;\s*/).map(e=>{let[t,...i]=e.split(" ");return[t,i.join(" ")]}));return(n=n??{}).directives=s,"report-uri"in s&&i.push("The report-uri directive is not supported. Use the Content-Security-Policy-Report-Only HTTP header instead."),"frame-ancestors"in s&&i.push("The frame-ancestors directive is not supported. Use the Content-Security-Policy HTTP header instead."),"sandbox"in s&&i.push("The sandbox directive is not supported. Use the Content-Security-Policy HTTP header instead."),{warnings:i,payload:n}}(e,t):R(e,t)?Y(e,t):z(e,t)?K(e,t):q(e,t)?W(e,t):U(e,t)?J(e,t):_(e,t)?function(e,t){let i=t.getAttribute(e,"href"),n=F(i),r=j(e.parentElement,n);if(!r)throw Error("Expected an invalid preload, but none found.");return{warnings:[`This preload has little to no effect. ${i} is already discoverable by another ${r.tagName} element.`]}}(e,t):{}}function D(e,t){var i,n,r,s;let a={payload:null,warnings:[]},o=t.getAttribute(e,"content");try{a.payload=function(e){let t=new Uint8Array([...atob(e)].map(e=>e.charCodeAt(0))),i=new DataView(t.buffer),n=i.getUint32(65,!1),r=JSON.parse(new TextDecoder().decode(t.slice(69,69+n)));return r.expiry=new Date(1e3*r.expiry),r}(o)}catch{return a.warnings.push("invalid token"),a}if(a.payload.expiry<new Date&&a.warnings.push("expired"),i=a.payload.origin,n=document.location.href,new URL(i).origin!==new URL(n).origin){let e=(r=a.payload.origin,s=document.location.href,r=new URL(r),(s=new URL(s)).host.endsWith(`.${r.host}`));e&&!a.payload.isSubdomain?a.warnings.push("invalid subdomain"):e||a.payload.isThirdParty||a.warnings.push("invalid third-party origin")}return a}function R(e,t){return t.matches(e,'meta[http-equiv="default-style" i]')}function q(e,t){return t.matches(e,V)}function U(e,t){return t.matches(e,L)}function z(e,t){return t.matches(e,'meta[name="viewport" i]')}function _(e,t){if(!t.matches(e,M))return!1;let i=t.getAttribute(e,"href");if(!i)return!1;let n=F(i);return null!=j(e.parentElement,n)}function j(e,t){let i=Array.from(e.querySelectorAll(`link:not(${M}), script`));return i.find(e=>{let i=e.getAttribute("href")||e.getAttribute("src");return!!i&&t==F(i)})}function F(e){return new URL(e,document.baseURI).href}function Y(e,t){let i=[],n=null,r=t.getAttribute(e,"content"),s=e.parentElement.querySelector(`link[rel~="alternate" i][rel~="stylesheet" i][title="${r}"]`);return r?s||(n={alternateStylesheets:Array.from(e.parentElement.querySelectorAll('link[rel~="alternate" i][rel~="stylesheet" i]'))},i.push(`This has no effect. No alternate stylesheet found having title="${r}".`)):i.push("This has no effect. The content attribute must be set to a valid stylesheet title."),i.push("Even when used correctly, the default-style method of setting a preferred stylesheet results in a flash of unstyled content. Use modern CSS features like @media rules instead."),{warnings:i,payload:n}}function W(e,t){let i=[],n=null;if(t.matches(e,':is(meta[charset] ~ meta[http-equiv="content-type" i])')||t.matches(e,":has(~ meta[charset])")){let t=e.parentElement.querySelector("meta[charset]");(n=n??{}).encodingDeclaration=t,i.push(`There can only be one meta-based character encoding declaration per document. Already found \`${t.outerHTML}\`.`)}let r=e.ownerDocument.documentElement.outerHTML.indexOf(e.outerHTML)+e.outerHTML.length;r>1024&&((n=n??{}).characterPosition=r,i.push(`The element containing the character encoding declaration must be serialized completely within the first 1024 bytes of the document. Found at byte ${r}.`));let s=null;return s=t.matches(e,"meta[charset]")?t.getAttribute(e,"charset"):t.getAttribute(e,"content")?.match(/text\/html;\s*charset=(.*)/i)?.[1]?.trim(),s?.toLowerCase()!="utf-8"&&((n=n??{}).charset=s,i.push(`Documents are required to use UTF-8 encoding. Found "${s}".`)),i.length&&(i[i.length-1]+="\nLearn more: https://html.spec.whatwg.org/multipage/semantics.html#character-encoding-declaration"),{warnings:i,payload:n}}function J(e,t){let i=[],n=t.getAttribute(e,"http-equiv").toLowerCase(),r=t.getAttribute(e,"content")?.toLowerCase();switch(n){case"content-security-policy":case"content-security-policy-report-only":case"origin-trial":case"content-type":case"default-style":break;case"refresh":if(!r){i.push("This doesn't do anything. The content attribute must be set. However, using refresh is discouraged.");break}r.includes("url=")?i.push("Meta auto-redirects are discouraged. Use HTTP 3XX responses instead."):i.push("Meta auto-refreshes are discouraged unless users have the ability to disable it.");break;case"x-dns-prefetch-control":"on"==r?i.push(`DNS prefetching is enabled by default. Setting it to "${r}" has no effect.`):"off"!=r?i.push(`This is a non-standard way of disabling DNS prefetching, which is a performance optimization. Found content="${r}". Use content="off" if you have a legitimate security concern, otherwise remove it.`):i.push("This is non-standard, however most browsers support disabling speculative DNS prefetching. It should still be noted that DNS prefetching is a generally accepted performance optimization and you should only disable it if you have specific security concerns.");break;case"cache-control":case"etag":case"pragma":case"expires":case"last-modified":i.push("This doesn't do anything. Use HTTP headers for any cache directives.");break;case"x-frame-options":i.push("This doesn't do anything. Use the CSP HTTP header with the frame-ancestors directive instead.");break;case"x-ua-compatible":case"content-style-type":case"content-script-type":case"imagetoolbar":case"cleartype":case"page-enter":case"page-exit":case"site-enter":case"site-exit":case"msthemecompatible":case"window-target":i.push("This doesn't do anything. It was an Internet Explorer feature and is now deprecated.");break;case"content-language":case"language":i.push("This is non-conforming. Use the html[lang] attribute instead.");break;case"set-cookie":i.push("This is non-conforming. Use the Set-Cookie HTTP header instead.");break;case"application-name":case"author":case"description":case"generator":case"keywords":case"referrer":case"theme-color":case"color-scheme":case"viewport":case"creator":case"googlebot":case"publisher":case"robots":i.push(`This doesn't do anything. Did you mean \`meta[name=${n}]\`?`);break;case"encoding":i.push("This doesn't do anything. Did you mean `meta[charset]`?");break;case"title":i.push("This doesn't do anything. Did you mean to use the `title` tag instead?");break;case"accept-ch":case"delegate-ch":i.push("This is non-standard and may not work across browsers. Use HTTP headers instead.");break;default:i.push("This is non-standard and may not work across browsers. http-equiv is not an alternative to HTTP headers.")}return{warnings:i}}function K(e,t){let i=[],n=null;if(t.matches(e,'meta[name="viewport" i] ~ meta[name="viewport" i]')){let t=e.parentElement.querySelector('meta[name="viewport" i]');return n={firstMetaViewport:t},i.push("Another meta viewport element has already been declared. Having multiple viewport settings can lead to unexpected behavior."),{warnings:i,payload:n}}let r=t.getAttribute(e,"content")?.toLowerCase();if(!r)return i.push("Invalid viewport. The content attribute must be set."),{warnings:i,payload:n};let s=Object.fromEntries(r.split(",").map(e=>{let[t,i]=e.split("=");return[t?.trim(),i?.trim()]}));if("width"in s){let e=s.width;1>Number(e)||Number(e)>1e4?i.push(`Invalid width "${e}". Numeric values must be between 1 and 10000.`):"device-width"!=e&&i.push(`Invalid width "${e}".`)}if("height"in s){let e=s.height;1>Number(e)||Number(e)>1e4?i.push(`Invalid height "${e}". Numeric values must be between 1 and 10000.`):"device-height"!=e&&i.push(`Invalid height "${e}".`)}if("initial-scale"in s){let e=Number(s["initial-scale"]);isNaN(e)&&i.push(`Invalid initial zoom level "${s["initial-scale"]}". Values must be numeric.`),(e<.1||e>10)&&i.push(`Invalid initial zoom level "${e}". Values must be between 0.1 and 10.`)}if("minimum-scale"in s){let e=Number(s["minimum-scale"]);isNaN(e)&&i.push(`Invalid minimum zoom level "${s["minimum-scale"]}". Values must be numeric.`),(e<.1||e>10)&&i.push(`Invalid minimum zoom level "${e}". Values must be between 0.1 and 10.`)}if("maximum-scale"in s){let e=Number(s["maximum-scale"]);isNaN(e)&&i.push(`Invalid maximum zoom level "${s["maximum-scale"]}". Values must be numeric.`),(e<.1||e>10)&&i.push(`Invalid maximum zoom level "${e}". Values must be between 0.1 and 10.`),e<2&&i.push(`Disabling zoom levels under 2x can cause accessibility issues. Found "${e}".`)}if("user-scalable"in s){let e=s["user-scalable"];("no"==e||"0"==e)&&i.push(`Disabling zooming can cause accessibility issues to users with visual impairments. Found "${e}".`),["0","1","yes","no"].includes(e)||i.push(`Unsupported value "${e}" found.`)}if("interactive-widget"in s){let e=s["interactive-widget"];["resizes-visual","resizes-content","overlays-content"].includes(e)||i.push(`Unsupported value "${e}" found.`)}if("viewport-fit"in s){let e=s["viewport-fit"],t=["auto","contain","cover"];t.includes(e)||i.push(`Unsupported value "${e}" found. Should be one of: ${t.join(", ")}.`)}"shrink-to-fit"in s&&i.push("The shrink-to-fit directive has been obsolete since iOS 9.2.\n  See https://www.scottohara.me/blog/2018/12/11/shrink-to-fit.html");let a=new Set(["width","height","initial-scale","minimum-scale","maximum-scale","user-scalable","interactive-widget"]);return Object.keys(s).filter(e=>!a.has(e)&&"shrink-to-fit"!=e&&"viewport-fit"!=e).forEach(e=>{i.push(`Invalid viewport directive "${e}".`)}),{warnings:i,payload:n}}class Q{isElement(e){return!!e&&1===e.nodeType}getTagName(e){return e&&e.tagName?e.tagName.toLowerCase():""}getAttribute(e,t){return e&&"function"==typeof e.getAttribute?e.getAttribute(t):null}hasAttribute(e,t){return!!e&&"function"==typeof e.hasAttribute&&e.hasAttribute(t)}getAttributeNames(e){return e&&"function"==typeof e.getAttributeNames?e.getAttributeNames():[]}getTextContent(e){return e&&e.textContent||""}getChildren(e){return e&&e.children?Array.from(e.children):[]}matches(e,t){if(!e||"function"!=typeof e.matches)return!1;try{return e.matches(t)}catch(e){return!1}}getLocation(e){return null}stringify(e){if(!e||!e.nodeName)return"[invalid node]";let t=this.getTagName(e),i=this.getAttributeNames(e);if(0===i.length)return`<${t}>`;let n=i.map(t=>{let i=this.getAttribute(e,t),n=i?i.replace(/"/g,"&quot;"):"";return`${t}="${n}"`}).join(" ");return`<${t} ${n}>`}}async function X(e){await e.init(),function(e,t){let i=new Q,n=t.getValidationWarnings(e.getHead(),i);e.logValidationWarnings(n)}(e,x);let t=function(e,t,i){let n=new Q,r=e.getHead(),s=i.getHeadWeights(r,n).map(({element:i,weight:r})=>({weight:r,element:e.getLoggableElement(i),isValid:!t.hasValidationWarning(i,n),customValidations:t.getCustomValidations(i,n)}));e.visualizeHead("Actual",r,s);let a=Array.from(s).sort((e,t)=>t.weight-e.weight),o=document.createElement("head");return a.forEach(({element:e})=>{o.appendChild(e.cloneNode(!0))}),e.visualizeHead("Sorted",o,a),s}(e,x,u);return{actual:t.map(({element:t,weight:i,isValid:n,customValidations:r})=>(r?.payload?.expiry&&(r.payload.expiry=r.payload.expiry.toString()),{weight:i,color:e.getColor(i),selector:e.stringifyElement(t),innerHTML:t.innerHTML,isValid:n,customValidations:r}))}}async function Z(){let{options:e}=await chrome.storage.sync.get("options");return new l.Options(e)}!async function(){let e=await Z(),t=new a.IO(document,e),{click:i}=await chrome.storage.local.get("click");if(i)t.logElementFromSelector(JSON.parse(i)),await chrome.storage.local.remove("click");else{let e=await X(t);await chrome.storage.local.set({data:e})}}()})();